# Task 008: Implement LoreEngine and Connect Ontological Lore to Simulation

## Objective

Create a dedicated `LoreEngine` module that loads, parses, and exposes the canonical lore file (`lore.md`) to all components of the TV Show simulation.  
This engine becomes the ontological source of truth for world logic, character motivations, narrative arcs, and glossary terms.

## Goals

- [x] Create `lore_engine.py` inside `extensions/tvshow/`
- [x] Load and parse `lore.md` into structured format (dicts/lists)
- [x] Provide high-level access methods:
  - [x] `get_core_dream(character_id)`
  - [x] `get_traits(character_id)`
  - [x] `get_world_name()`
  - [x] `get_law_of_emergence()`
  - [x] `get_glossary_term(term: str)`
  - [x] `get_arc(title: str)`
  - [x] `list_all_arcs()`
  - [x] `get_theme_statements()`
- [x] Expose singleton `lore = LoreEngine()` to be imported by:
  - [x] Reflector (scene context enhancement)
  - [x] Entity (dream vector, voice echo)
  - [x] ScenarioManager (arc selection / dynamic narration)
  - [x] Mood system (emotional weather descriptors)
- [x] Add validation and error handling for malformed entries

## Optional

- [x] Allow override of `lore.md` via settings/env var
- [x] Hot reload support during dev mode

## Output

- [x] A fully functional `LoreEngine` that provides canonical context to all TV Show components
- [x] Clean API surface for semantic queries
- [x] No need to hardcode narrative rules, traits, or glossary in logic

## Priority

High — this establishes the lore as a dynamic part of the system, not just static flavor text.

## Labels

`#tvshow`, `#lore`, `#engine`, `#narrative`, `#reflector`, `#characters`, `#context`

## Status: ✅ COMPLETED

### Summary
- ✅ LoreEngine implemented with singleton pattern
- ✅ All lore sections parsed (world, characters, glossary, arcs, themes)
- ✅ Comprehensive API methods for accessing lore data
- ✅ Full integration with all simulation components
- ✅ Comprehensive test suite (28 tests passing)
- ✅ Updated README with all developments from tasks 003-007
- ✅ Error handling and graceful degradation
- ✅ Custom lore file path override support